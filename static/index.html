<!DOCTYPE html>
<!-- saved from url=(0048)https://mozilla.github.io/pdf.js/web/viewer.html -->
<html dir="ltr" mozdisallowselectionprint="" style="--viewer-container-height: 968px;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <title>compressed.tracemonkey-pldi-09.pdf</title>

<!-- This snippet is used in production (included from viewer.html) -->
<link rel="resource" type="application/l10n" href="https://mozilla.github.io/pdf.js/web/locale/locale.properties">
<script src="./pdf.js"></script>

    <link rel="stylesheet" href="./viewer.css">

  <script src="./viewer.js"></script>
  <script src="./mark-helper.js" defer></script>
  </head>

  <body tabindex="1">
    <div id="outerContainer">

      <div id="sidebarContainer">
        <div id="toolbarSidebar">
          <div id="toolbarSidebarLeft">
            <div id="sidebarViewButtons" class="splitToolbarButton toggled" role="radiogroup">
              <button id="viewThumbnail" class="toolbarButton toggled" title="显示缩略图" tabindex="2" data-l10n-id="thumbs" role="radio" aria-checked="true" aria-controls="thumbnailView">
                 <span data-l10n-id="thumbs_label">缩略图</span>
              </button>
              <button id="viewOutline" class="toolbarButton" title="显示文档大纲（双击展开/折叠所有项）" tabindex="3" data-l10n-id="document_outline" role="radio" aria-checked="false" aria-controls="outlineView" disabled="">
                 <span data-l10n-id="document_outline_label">文档大纲</span>
              </button>
              <button id="viewAttachments" class="toolbarButton" title="显示附件" tabindex="4" data-l10n-id="attachments" role="radio" aria-checked="false" aria-controls="attachmentsView" disabled="">
                 <span data-l10n-id="attachments_label">附件</span>
              </button>
              <button id="viewLayers" class="toolbarButton" title="显示图层（双击即可将所有图层重置为默认状态）" tabindex="5" data-l10n-id="layers" role="radio" aria-checked="false" aria-controls="layersView" disabled="">
                 <span data-l10n-id="layers_label">图层</span>
              </button>
            </div>
          </div>

          <div id="toolbarSidebarRight">
            <div id="outlineOptionsContainer" class="hidden">
              <div class="verticalToolbarSeparator"></div>

              <button id="currentOutlineItem" class="toolbarButton" disabled="" title="查找当前大纲项目" tabindex="6" data-l10n-id="current_outline_item">
                <span data-l10n-id="current_outline_item_label">当前大纲项目</span>
              </button>
            </div>
          </div>
        </div>
        <div id="sidebarContent">
          <div id="thumbnailView"><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=1" title="第 1 页"><div class="thumbnail selected" data-page-number="1" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=2" title="第 2 页"><div class="thumbnail" data-page-number="2" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=3" title="第 3 页"><div class="thumbnail" data-page-number="3" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=4" title="第 4 页"><div class="thumbnail" data-page-number="4" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=5" title="第 5 页"><div class="thumbnail" data-page-number="5" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=6" title="第 6 页"><div class="thumbnail" data-page-number="6" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=7" title="第 7 页"><div class="thumbnail" data-page-number="7" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=8" title="第 8 页"><div class="thumbnail" data-page-number="8" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=9" title="第 9 页"><div class="thumbnail" data-page-number="9" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=10" title="第 10 页"><div class="thumbnail" data-page-number="10" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=11" title="第 11 页"><div class="thumbnail" data-page-number="11" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=12" title="第 12 页"><div class="thumbnail" data-page-number="12" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=13" title="第 13 页"><div class="thumbnail" data-page-number="13" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a><a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=14" title="第 14 页"><div class="thumbnail" data-page-number="14" style="--thumbnail-width: 98px; --thumbnail-height: 126px;"><div class="thumbnailImage"></div></div></a></div>
          <div id="outlineView" class="hidden"></div>
          <div id="attachmentsView" class="hidden"></div>
          <div id="layersView" class="hidden"></div>
        </div>
        <div id="sidebarResizer"></div>
      </div>  <!-- sidebarContainer -->

      <div id="mainContainer">
        <div class="findbar hidden doorHanger" id="findbar">
          <div id="findbarInputContainer">
            <input id="findInput" class="toolbarField" title="查找" placeholder="在文档中查找…" tabindex="91" data-l10n-id="find_input" aria-invalid="false">
            <div class="splitToolbarButton">
              <button id="findPrevious" class="toolbarButton" title="查找词语上一次出现的位置" tabindex="92" data-l10n-id="find_previous">
                <span data-l10n-id="find_previous_label">上一页</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button id="findNext" class="toolbarButton" title="查找词语后一次出现的位置" tabindex="93" data-l10n-id="find_next">
                <span data-l10n-id="find_next_label">下一页</span>
              </button>
            </div>
          </div>

          <div id="findbarOptionsOneContainer">
            <input type="checkbox" id="findHighlightAll" class="toolbarField" tabindex="94">
            <label for="findHighlightAll" class="toolbarLabel" data-l10n-id="find_highlight">全部高亮显示</label>
            <input type="checkbox" id="findMatchCase" class="toolbarField" tabindex="95">
            <label for="findMatchCase" class="toolbarLabel" data-l10n-id="find_match_case_label">区分大小写</label>
          </div>
          <div id="findbarOptionsTwoContainer">
            <input type="checkbox" id="findMatchDiacritics" class="toolbarField" tabindex="96">
            <label for="findMatchDiacritics" class="toolbarLabel" data-l10n-id="find_match_diacritics_label">匹配变音符号</label>
            <input type="checkbox" id="findEntireWord" class="toolbarField" tabindex="97">
            <label for="findEntireWord" class="toolbarLabel" data-l10n-id="find_entire_word_label">全词匹配</label>
          </div>

          <div id="findbarMessageContainer" aria-live="polite">
            <span id="findResultsCount" class="toolbarLabel"></span>
            <span id="findMsg" class="toolbarLabel"></span>
          </div>
        </div>  <!-- findbar -->

        <div class="editorParamsToolbar hidden doorHangerRight" id="editorFreeTextParamsToolbar">
          <div class="editorParamsToolbarContainer">
            <div class="editorParamsSetter">
              <label for="editorFreeTextColor" class="editorParamsLabel" data-l10n-id="editor_free_text_color">颜色</label>
              <input type="color" id="editorFreeTextColor" class="editorParamsColor" tabindex="100">
            </div>
            <div class="editorParamsSetter">
              <label for="editorFreeTextFontSize" class="editorParamsLabel" data-l10n-id="editor_free_text_size">字号</label>
              <input type="range" id="editorFreeTextFontSize" class="editorParamsSlider" value="10" min="5" max="100" step="1" tabindex="101">
            </div>
          </div>
        </div>

        <div class="editorParamsToolbar hidden doorHangerRight" id="editorInkParamsToolbar">
          <div class="editorParamsToolbarContainer">
            <div class="editorParamsSetter">
              <label for="editorInkColor" class="editorParamsLabel" data-l10n-id="editor_ink_color">颜色</label>
              <input type="color" id="editorInkColor" class="editorParamsColor" tabindex="102">
            </div>
            <div class="editorParamsSetter">
              <label for="editorInkThickness" class="editorParamsLabel" data-l10n-id="editor_ink_thickness">粗细</label>
              <input type="range" id="editorInkThickness" class="editorParamsSlider" value="1" min="1" max="20" step="1" tabindex="103">
            </div>
            <div class="editorParamsSetter">
              <label for="editorInkOpacity" class="editorParamsLabel" data-l10n-id="editor_ink_opacity">不透明度</label>
              <input type="range" id="editorInkOpacity" class="editorParamsSlider" value="100" min="1" max="100" step="1" tabindex="104">
            </div>
          </div>
        </div>

        <div class="editorParamsToolbar hidden doorHangerRight" id="editorStampParamsToolbar">
          <div class="editorParamsToolbarContainer">
            <button id="editorStampAddImage" class="secondaryToolbarButton" title="添加图像" tabindex="105" data-l10n-id="editor_stamp_add_image">
              <span data-l10n-id="editor_stamp_add_image_label">添加图像</span>
            </button>
          </div>
        </div>

        <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">
          <div id="secondaryToolbarButtonContainer">
            <button id="secondaryOpenFile" class="secondaryToolbarButton visibleLargeView" title="打开文件" tabindex="51" data-l10n-id="open_file">
              <span data-l10n-id="open_file_label">打开</span>
            </button>

            <button id="secondaryPrint" class="secondaryToolbarButton visibleMediumView" title="打印" tabindex="52" data-l10n-id="print">
              <span data-l10n-id="print_label">打印</span>
            </button>

            <button id="secondaryDownload" class="secondaryToolbarButton visibleMediumView" title="保存" tabindex="53" data-l10n-id="save">
              <span data-l10n-id="save_label">保存</span>
            </button>

            <div class="horizontalToolbarSeparator visibleLargeView"></div>

            <button id="presentationMode" class="secondaryToolbarButton" title="切换到演示模式" tabindex="54" data-l10n-id="presentation_mode">
              <span data-l10n-id="presentation_mode_label">演示模式</span>
            </button>

            <a href="https://mozilla.github.io/pdf.js/web/viewer.html#page=1&amp;zoom=auto,-16,800" id="viewBookmark" class="secondaryToolbarButton" title="当前页面（在当前页面查看 URL）" tabindex="55" data-l10n-id="bookmark1">
              <span data-l10n-id="bookmark1_label">当前页面</span>
            </a>

            <div id="viewBookmarkSeparator" class="horizontalToolbarSeparator"></div>

            <button id="firstPage" class="secondaryToolbarButton" title="转到第一页" tabindex="56" data-l10n-id="first_page" disabled="">
              <span data-l10n-id="first_page_label">转到第一页</span>
            </button>
            <button id="lastPage" class="secondaryToolbarButton" title="转到最后一页" tabindex="57" data-l10n-id="last_page">
              <span data-l10n-id="last_page_label">转到最后一页</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="pageRotateCw" class="secondaryToolbarButton" title="顺时针旋转" tabindex="58" data-l10n-id="page_rotate_cw">
              <span data-l10n-id="page_rotate_cw_label">顺时针旋转</span>
            </button>
            <button id="pageRotateCcw" class="secondaryToolbarButton" title="逆时针旋转" tabindex="59" data-l10n-id="page_rotate_ccw">
              <span data-l10n-id="page_rotate_ccw_label">逆时针旋转</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <div id="cursorToolButtons" role="radiogroup">
              <button id="cursorSelectTool" class="secondaryToolbarButton toggled" title="启用文本选择工具" tabindex="60" data-l10n-id="cursor_text_select_tool" role="radio" aria-checked="true">
                <span data-l10n-id="cursor_text_select_tool_label">文本选择工具</span>
              </button>
              <button id="cursorHandTool" class="secondaryToolbarButton" title="启用手形工具" tabindex="61" data-l10n-id="cursor_hand_tool" role="radio" aria-checked="false">
                <span data-l10n-id="cursor_hand_tool_label">手形工具</span>
              </button>
            </div>

            <div class="horizontalToolbarSeparator"></div>

            <div id="scrollModeButtons" role="radiogroup">
              <button id="scrollPage" class="secondaryToolbarButton" title="使用页面滚动" tabindex="62" data-l10n-id="scroll_page" role="radio" aria-checked="false">
                <span data-l10n-id="scroll_page_label">页面滚动</span>
              </button>
              <button id="scrollVertical" class="secondaryToolbarButton toggled" title="使用垂直滚动" tabindex="63" data-l10n-id="scroll_vertical" role="radio" aria-checked="true">
                <span data-l10n-id="scroll_vertical_label">垂直滚动</span>
              </button>
              <button id="scrollHorizontal" class="secondaryToolbarButton" title="使用水平滚动" tabindex="64" data-l10n-id="scroll_horizontal" role="radio" aria-checked="false">
                <span data-l10n-id="scroll_horizontal_label">水平滚动</span>
              </button>
              <button id="scrollWrapped" class="secondaryToolbarButton" title="使用平铺滚动" tabindex="65" data-l10n-id="scroll_wrapped" role="radio" aria-checked="false">
                <span data-l10n-id="scroll_wrapped_label">平铺滚动</span>
              </button>
            </div>

            <div class="horizontalToolbarSeparator"></div>

            <div id="spreadModeButtons" role="radiogroup">
              <button id="spreadNone" class="secondaryToolbarButton toggled" title="不加入衔接页" tabindex="66" data-l10n-id="spread_none" role="radio" aria-checked="true">
                <span data-l10n-id="spread_none_label">单页视图</span>
              </button>
              <button id="spreadOdd" class="secondaryToolbarButton" title="加入衔接页使奇数页作为起始页" tabindex="67" data-l10n-id="spread_odd" role="radio" aria-checked="false">
                <span data-l10n-id="spread_odd_label">双页视图</span>
              </button>
              <button id="spreadEven" class="secondaryToolbarButton" title="加入衔接页使偶数页作为起始页" tabindex="68" data-l10n-id="spread_even" role="radio" aria-checked="false">
                <span data-l10n-id="spread_even_label">书籍视图</span>
              </button>
            </div>

            <div class="horizontalToolbarSeparator"></div>

            <button id="documentProperties" class="secondaryToolbarButton" title="文档属性…" tabindex="69" data-l10n-id="document_properties" aria-controls="documentPropertiesDialog">
              <span data-l10n-id="document_properties_label">文档属性…</span>
            </button>
          </div>
        </div>  <!-- secondaryToolbar -->

        <div class="toolbar">
          <div id="toolbarContainer">
            <div id="toolbarViewer">
              <div id="toolbarViewerLeft">
                <button id="sidebarToggle" class="toolbarButton" title="切换侧栏" tabindex="11" data-l10n-id="toggle_sidebar" aria-expanded="false" aria-controls="sidebarContainer">
                  <span data-l10n-id="toggle_sidebar_label">切换侧栏</span>
                </button>
                <div class="toolbarButtonSpacer"></div>
                <button id="viewFind" class="toolbarButton" title="在文档中查找" tabindex="12" data-l10n-id="findbar" aria-expanded="false" aria-controls="findbar">
                  <span data-l10n-id="findbar_label">查找</span>
                </button>
                <div class="splitToolbarButton hiddenSmallView">
                  <button class="toolbarButton" title="上一页" id="previous" tabindex="13" data-l10n-id="previous" disabled="">
                    <span data-l10n-id="previous_label">上一页</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button class="toolbarButton" title="下一页" id="next" tabindex="14" data-l10n-id="next">
                    <span data-l10n-id="next_label">下一页</span>
                  </button>
                </div>
                <input type="number" id="pageNumber" class="toolbarField" title="页面" value="1" min="1" tabindex="15" data-l10n-id="page" autocomplete="off" max="14">
                <span id="numPages" class="toolbarLabel">/ 14</span>
              </div>
              <div id="toolbarViewerRight">
                <button id="openFile" class="toolbarButton hiddenLargeView" title="打开文件" tabindex="31" data-l10n-id="open_file">
                  <span data-l10n-id="open_file_label">打开</span>
                </button>

                <button id="print" class="toolbarButton hiddenMediumView" title="打印" tabindex="32" data-l10n-id="print">
                  <span data-l10n-id="print_label">打印</span>
                </button>

                <button id="download" class="toolbarButton hiddenMediumView" title="保存" tabindex="33" data-l10n-id="save">
                  <span data-l10n-id="save_label">保存</span>
                </button>

                <div class="verticalToolbarSeparator hiddenMediumView"></div>

                <div id="editorModeButtons" class="splitToolbarButton toggled" role="radiogroup">
                  <button id="editorOpenNotes" class="toolbarButton" title="笔记" role="radio" aria-checked="false" aria-controls="editorOpenNotesParamsToolbar" tabindex="34" data-l10n-id="editor_open_notes">
                    <span data-l10n-id="editor_open_notes_label">笔记</span>
                  </button>
                  <button id="editorFreeText" class="toolbarButton" title="文本" role="radio" aria-checked="false" aria-controls="editorFreeTextParamsToolbar" tabindex="34" data-l10n-id="editor_free_text2">
                    <span data-l10n-id="editor_free_text2_label">文本</span>
                  </button>
                  <button id="editorInk" class="toolbarButton" title="绘图" role="radio" aria-checked="false" aria-controls="editorInkParamsToolbar" tabindex="35" data-l10n-id="editor_ink2">
                    <span data-l10n-id="editor_ink2_label">绘图</span>
                  </button>
                  <button id="editorStamp" class="toolbarButton" title="添加或编辑图像" role="radio" aria-checked="false" aria-controls="editorStampParamsToolbar" tabindex="36" data-l10n-id="editor_stamp1">
                    <span data-l10n-id="editor_stamp1_label">添加或编辑图像</span>
                  </button>
                </div>

                <div id="editorModeSeparator" class="verticalToolbarSeparator"></div>

                <button id="secondaryToolbarToggle" class="toolbarButton" title="工具" tabindex="48" data-l10n-id="tools" aria-expanded="false" aria-controls="secondaryToolbar">
                  <span data-l10n-id="tools_label">工具</span>
                </button>
              </div>
              <div id="toolbarViewerMiddle">
                <div class="splitToolbarButton">
                  <button id="zoomOut" class="toolbarButton" title="缩小" tabindex="21" data-l10n-id="zoom_out">
                    <span data-l10n-id="zoom_out_label">缩小</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button id="zoomIn" class="toolbarButton" title="放大" tabindex="22" data-l10n-id="zoom_in">
                    <span data-l10n-id="zoom_in_label">放大</span>
                   </button>
                </div>
                <span id="scaleSelectContainer" class="dropdownToolbarButton">
                  <select id="scaleSelect" title="缩放" tabindex="23" data-l10n-id="zoom">
                    <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">自动缩放</option>
                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">实际大小</option>
                    <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">适合页面</option>
                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">适合页宽</option>
                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"></option>
                    <option title="" value="0.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 50 }">50%</option>
                    <option title="" value="0.75" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 75 }">75%</option>
                    <option title="" value="1" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 100 }">100%</option>
                    <option title="" value="1.25" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 125 }">125%</option>
                    <option title="" value="1.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 150 }">150%</option>
                    <option title="" value="2" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 200 }">200%</option>
                    <option title="" value="3" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 300 }">300%</option>
                    <option title="" value="4" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 400 }">400%</option>
                  </select>
                </span>
              </div>
            </div>
            <div id="loadingBar" class="hidden" style="--progressBar-percent: 100%;">
              <div class="progress">
                <div class="glimmer">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="viewerContainer" tabindex="0">
          <div id="hiddenCopyElement"></div><div id="viewer" class="pdfViewer" style="--scale-factor: 1.272875816993464;"><div class="page" data-page-number="1" role="region" aria-label="第 1 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);" data-loaded="true"><div class="textLayer" data-main-rotation="0" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"><span role="presentation" dir="ltr" style="left: 13.16%; top: 9.81%; font-size: calc(var(--scale-factor)*17.93px); font-family: sans-serif; transform: scaleX(0.896591);">Trace-based Just-in-Time Type Specialization for Dynamic</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 43.09%; top: 12.32%; font-size: calc(var(--scale-factor)*17.93px); font-family: sans-serif; transform: scaleX(0.910453);">Languages</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 19.66%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.888424);">Andreas Gal</span><span role="presentation" dir="ltr" style="left: 28.66%; top: 17.27%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 29.43%; top: 17.31%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">+</span><span role="presentation" dir="ltr" style="left: 30.59%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.88049);">, Brendan Eich</span><span role="presentation" dir="ltr" style="left: 41.28%; top: 17.27%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 42.06%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.888232);">, Mike Shaver</span><span role="presentation" dir="ltr" style="left: 52.07%; top: 17.27%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 52.84%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.895543);">, David Anderson</span><span role="presentation" dir="ltr" style="left: 65.49%; top: 17.27%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 66.26%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.909429);">, David Mandelin</span><span role="presentation" dir="ltr" style="left: 78.81%; top: 17.27%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 79.58%; top: 17.52%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 15.28%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.884278);">Mohammad R. Haghighat</span><span role="presentation" dir="ltr" style="left: 33.94%; top: 18.94%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">$</span><span role="presentation" dir="ltr" style="left: 34.71%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.8939);">, Blake Kaplan</span><span role="presentation" dir="ltr" style="left: 45.38%; top: 18.91%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 46.16%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.879496);">, Graydon Hoare</span><span role="presentation" dir="ltr" style="left: 58.14%; top: 18.91%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 58.91%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.885456);">, Boris Zbarsky</span><span role="presentation" dir="ltr" style="left: 69.98%; top: 18.91%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 70.75%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.855342);">, Jason Orendorff</span><span role="presentation" dir="ltr" style="left: 83.19%; top: 18.91%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 83.96%; top: 19.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif;">,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 11.16%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.842594);">Jesse Ruderman</span><span role="presentation" dir="ltr" style="left: 22.74%; top: 20.54%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">∗</span><span role="presentation" dir="ltr" style="left: 23.52%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.902439);">, Edwin Smith</span><span role="presentation" dir="ltr" style="left: 33.81%; top: 20.58%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">#</span><span role="presentation" dir="ltr" style="left: 35.05%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.893815);">, Rick Reitmaier</span><span role="presentation" dir="ltr" style="left: 46.84%; top: 20.58%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">#</span><span role="presentation" dir="ltr" style="left: 48.07%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.879968);">, Michael Bebenita</span><span role="presentation" dir="ltr" style="left: 61.65%; top: 20.58%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">+</span><span role="presentation" dir="ltr" style="left: 62.81%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.867847);">, Mason Chang</span><span role="presentation" dir="ltr" style="left: 73.7%; top: 20.58%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif; transform: scaleX(1.47292);">+#</span><span role="presentation" dir="ltr" style="left: 76.09%; top: 20.79%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.892631);">, Michael Franz</span><span role="presentation" dir="ltr" style="left: 87.38%; top: 20.58%; font-size: calc(var(--scale-factor)*7.97px); font-family: sans-serif;">+</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 43.49%; top: 22.87%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.900292);">Mozilla Corporation</span><span role="presentation" dir="ltr" style="left: 55.5%; top: 22.65%; font-size: calc(var(--scale-factor)*5.98px); font-family: monospace;">∗</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 14.87%; top: 24.13%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 15.62%; top: 24.09%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875076);">gal,brendan,shaver,danderson,dmandelin,mrbkap,graydon,bz,jorendorff,jruderman</span><span role="presentation" dir="ltr" style="left: 74.84%; top: 24.13%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 75.6%; top: 24.09%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">@mozilla.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 43.64%; top: 26.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.87742);">Adobe Corporation</span><span role="presentation" dir="ltr" style="left: 54.99%; top: 25.98%; font-size: calc(var(--scale-factor)*5.98px); font-family: sans-serif;">#</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 38.71%; top: 27.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 39.46%; top: 27.39%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">edwsmith,rreitmai</span><span role="presentation" dir="ltr" style="left: 52.54%; top: 27.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 53.29%; top: 27.39%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">@adobe.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 44.44%; top: 29.51%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.886343);">Intel Corporation</span><span role="presentation" dir="ltr" style="left: 54.57%; top: 29.32%; font-size: calc(var(--scale-factor)*5.98px); font-family: sans-serif;">$</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 37.56%; top: 30.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 38.31%; top: 30.73%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">mohammad.r.haghighat</span><span role="presentation" dir="ltr" style="left: 53.69%; top: 30.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 54.44%; top: 30.73%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">@intel.com</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 40.22%; top: 32.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.909926);">University of California, Irvine</span><span role="presentation" dir="ltr" style="left: 58.47%; top: 32.58%; font-size: calc(var(--scale-factor)*5.98px); font-family: sans-serif;">+</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 37.94%; top: 34.03%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">{</span><span role="presentation" dir="ltr" style="left: 38.69%; top: 33.99%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">mbebenit,changm,franz</span><span role="presentation" dir="ltr" style="left: 54.85%; top: 34.03%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">}</span><span role="presentation" dir="ltr" style="left: 55.6%; top: 33.99%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">@uci.edu</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 42.39%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.947695);">Abstract</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 44.35%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.869636);">Dynamic languages such as JavaScript are more difﬁcult to com-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 45.6%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.864058);">pile than statically typed ones. Since no concrete type information</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 46.86%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.834852);">is available, traditional compilers need to emit generic code that can</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 48.12%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.844419);">handle all possible type combinations at runtime. We present an al-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 49.38%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.882701);">ternative compilation technique for dynamically-typed languages</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 50.64%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845463);">that identiﬁes frequently executed loop traces at run-time and then</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 51.89%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.878833);">generates machine code on the ﬂy that is specialized for the ac-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 53.15%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.884076);">tual dynamic types occurring on each path through the loop. Our</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 54.41%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845034);">method provides cheap inter-procedural type specialization, and an</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 55.67%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.866303);">elegant and efﬁcient way of incrementally compiling lazily discov-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 56.92%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.856154);">ered alternative paths through nested loops. We have implemented</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 58.18%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.863135);">a dynamic compiler for JavaScript based on our technique and we</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 59.44%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.880574);">have measured speedups of 10x and more for certain benchmark</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 60.7%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.861443);">programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 62.67%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.898204);">Categories and Subject Descriptors</span><span role="presentation" dir="ltr" style="left: 30.65%; top: 62.67%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 32.12%; top: 62.67%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.950907);">D.3.4 [</span><span role="presentation" dir="ltr" style="left: 36.43%; top: 62.67%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.88229);">Programming Lan-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 63.93%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.837183);">guages</span><span role="presentation" dir="ltr" style="left: 12.94%; top: 63.93%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.860689);">]: Processors —</span><span role="presentation" dir="ltr" style="left: 22.3%; top: 63.93%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 22.67%; top: 63.93%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.868181);">Incremental compilers, code generation</span><span role="presentation" dir="ltr" style="left: 46%; top: 63.93%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 65.9%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.908005);">General Terms</span><span role="presentation" dir="ltr" style="left: 17.88%; top: 65.9%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 19.34%; top: 65.9%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.873862);">Design, Experimentation, Measurement, Perfor-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 67.15%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.85678);">mance.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 69.12%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.872871);">Keywords</span><span role="presentation" dir="ltr" style="left: 14.63%; top: 69.12%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 16.09%; top: 69.12%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.839607);">JavaScript, just-in-time compilation, trace trees.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 71.78%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(1.12858);">1.</span><span role="presentation" dir="ltr" style="left: 10.17%; top: 71.78%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 11.96%; top: 71.78%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.978317);">Introduction</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 73.74%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.878136);">Dynamic languages</span><span role="presentation" dir="ltr" style="left: 20.43%; top: 73.74%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 20.76%; top: 73.74%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.831894);">such as JavaScript, Python, and Ruby, are pop-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 74.99%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.841144);">ular since they are expressive, accessible to non-experts, and make</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 76.25%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.858303);">deployment as easy as distributing a source ﬁle. They are used for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 77.51%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.89185);">small scripts as well as for complex applications. JavaScript, for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 78.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.85007);">example, is the de facto standard for client-side web programming</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 84.21%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.888091);">Permission to make digital or hard copies of all or part of this work for personal or</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 85.21%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.85267);">classroom use is granted without fee provided that copies are not made or distributed</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 86.22%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.840844);">for proﬁt or commercial advantage and that copies bear this notice and the full citation</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 87.23%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.8532);">on the ﬁrst page. To copy otherwise, to republish, to post on servers or to redistribute</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 88.23%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.844989);">to lists, requires prior speciﬁc permission and/or a fee.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 89.49%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.957485);">PLDI’09,</span><span role="presentation" dir="ltr" style="left: 13.16%; top: 89.49%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 14.32%; top: 89.49%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.871997);">June 15–20, 2009, Dublin, Ireland.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 90.5%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.943018);">Copyright c</span><span role="presentation" dir="ltr" style="left: 13.72%; top: 90.46%; font-size: calc(var(--scale-factor)*6.97px); font-family: monospace;">©</span><span role="presentation" dir="ltr" style="left: 15.02%; top: 90.46%; font-size: calc(var(--scale-factor)*6.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 15.3%; top: 90.5%; font-size: calc(var(--scale-factor)*6.97px); font-family: sans-serif; transform: scaleX(0.809785);">2009 ACM 978-1-60558-392-1/09/06. . . $5.00</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 42.58%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853333);">and is used for the application logic of browser-based productivity</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 43.84%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.887281);">applications such as Google Mail, Google Docs and Zimbra Col-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 45.1%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.912037);">laboration Suite. In this domain, in order to provide a ﬂuid user</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 46.36%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.838737);">experience and enable a new generation of applications, virtual ma-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 47.62%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.85493);">chines must provide a low startup time and high performance.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 48.87%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.873822);">Compilers for statically typed languages rely on type informa-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 50.13%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.838499);">tion to generate efﬁcient machine code. In a dynamically typed pro-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 51.39%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.88133);">gramming language such as JavaScript, the types of expressions</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 52.65%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.886073);">may vary at runtime. This means that the compiler can no longer</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 53.91%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.865825);">easily transform operations into machine instructions that operate</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 55.16%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.864899);">on one speciﬁc type. Without exact type information, the compiler</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 56.42%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.875516);">must emit slower generalized machine code that can deal with all</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 57.68%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.863191);">potential type combinations. While compile-time static type infer-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 58.94%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.892686);">ence might be able to gather type information to generate opti-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 60.2%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.890005);">mized machine code, traditional static analysis is very expensive</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 61.45%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.86403);">and hence not well suited for the highly interactive environment of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 62.71%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845206);">a web browser.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 63.97%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.882219);">We present a trace-based compilation technique for dynamic</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 65.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855578);">languages that reconciles speed of compilation with excellent per-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 66.48%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.826548);">formance of the generated machine code. Our system uses a mixed-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 67.74%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.84064);">mode execution approach: the system starts running JavaScript in a</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 69%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845945);">fast-starting bytecode interpreter. As the program runs, the system</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 70.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.866118);">identiﬁes</span><span role="presentation" dir="ltr" style="left: 57.17%; top: 70.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 57.79%; top: 70.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853942);">hot</span><span role="presentation" dir="ltr" style="left: 59.67%; top: 70.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 60.31%; top: 70.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.875582);">(frequently executed) bytecode sequences, records</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 71.52%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.882643);">them, and compiles them to fast native code. We call such a se-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 72.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.844212);">quence of instructions a</span><span role="presentation" dir="ltr" style="left: 65.76%; top: 72.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 66.12%; top: 72.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.857019);">trace</span><span role="presentation" dir="ltr" style="left: 69.11%; top: 72.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;">.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 74.03%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.895121);">Unlike method-based dynamic compilers, our dynamic com-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 75.29%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.907785);">piler operates at the granularity of individual loops. This design</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 76.55%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.881796);">choice is based on the expectation that programs spend most of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 77.81%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.894842);">their time in hot loops. Even in dynamically typed languages, we</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 79.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.835256);">expect hot loops to be mostly</span><span role="presentation" dir="ltr" style="left: 68.78%; top: 79.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 69.11%; top: 79.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.814022);">type-stable</span><span role="presentation" dir="ltr" style="left: 75.53%; top: 79.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.830205);">, meaning that the types of</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 80.32%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.854372);">values are invariant. (12) For example, we would expect loop coun-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 81.58%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.843831);">ters that start as integers to remain integers for all iterations. When</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 82.84%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853852);">both of these expectations hold, a trace-based compiler can cover</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 84.1%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.84194);">the program execution with a small number of type-specialized, ef-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 85.35%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.866911);">ﬁciently compiled traces.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 86.61%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.857732);">Each compiled trace covers one path through the program with</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 87.87%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.849366);">one mapping of values to types. When the VM executes a compiled</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 89.13%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.927384);">trace, it cannot guarantee that the same path will be followed</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 90.39%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.90797);">or that the same types will occur in subsequent loop iterations.</span><div class="endOfContent"></div></div><div class="annotationLayer" hidden=""></div><div class="annotationEditorLayer" tabindex="0" hidden="" data-main-rotation="0" style="pointer-events: none; width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="canvasWrapper"><canvas role="presentation" width="779" height="1009" style="width: 779px; height: 1009px;"></canvas></div></div><div class="page" data-page-number="2" role="region" aria-label="第 2 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);" data-loaded="true"><div class="textLayer" data-main-rotation="0" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"><span role="presentation" dir="ltr" style="left: 8.82%; top: 9.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.84678);">Hence, recording and compiling a trace</span><span role="presentation" dir="ltr" style="left: 31.63%; top: 9.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 31.94%; top: 9.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.839812);">speculates</span><span role="presentation" dir="ltr" style="left: 38.04%; top: 9.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 38.35%; top: 9.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.80954);">that the path and</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 10.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.852651);">typing will be exactly as they were during recording for subsequent</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 11.75%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853006);">iterations of the loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 13.01%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.872974);">Every compiled trace contains all the</span><span role="presentation" dir="ltr" style="left: 32.78%; top: 13.01%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 33.2%; top: 13.01%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.865999);">guards</span><span role="presentation" dir="ltr" style="left: 37.21%; top: 13.01%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 37.63%; top: 13.01%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.868575);">(checks) required</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 14.27%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.912006);">to validate the speculation. If one of the guards fails (if control</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 15.52%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.897552);">ﬂow is different, or a value of a different type is generated), the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 16.78%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.901845);">trace exits. If an exit becomes hot, the VM can record a</span><span role="presentation" dir="ltr" style="left: 43.24%; top: 16.78%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 43.79%; top: 16.78%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.883913);">branch</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 18.04%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.857019);">trace</span><span role="presentation" dir="ltr" style="left: 11.81%; top: 18.04%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 12.17%; top: 18.04%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853046);">starting at the exit to cover the new path. In this way, the VM</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 19.3%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.82663);">records a</span><span role="presentation" dir="ltr" style="left: 14.15%; top: 19.3%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 14.52%; top: 19.3%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.838259);">trace tree</span><span role="presentation" dir="ltr" style="left: 20.1%; top: 19.3%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 20.46%; top: 19.3%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.854786);">covering all the hot paths through the loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 20.56%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.906683);">Nested loops can be difﬁcult to optimize for tracing VMs. In</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 21.81%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.816304);">a na¨</span><span role="presentation" dir="ltr" style="left: 11.38%; top: 21.81%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.895409);">ıve implementation, inner loops would become hot ﬁrst, and</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 23.07%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.899459);">the VM would start tracing there. When the inner loop exits, the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 24.33%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.861992);">VM would detect that a different branch was taken. The VM would</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 25.59%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.844045);">try to record a branch trace, and ﬁnd that the trace reaches not the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 26.85%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.86546);">inner loop header, but the outer loop header. At this point, the VM</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 28.1%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.860796);">could continue tracing until it reaches the inner loop header again,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 29.36%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.891761);">thus tracing the outer loop inside a trace tree for the inner loop.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 30.62%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845758);">But this requires tracing a copy of the outer loop for every side exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 31.88%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.882088);">and type combination in the inner loop. In essence, this is a form</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 33.13%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.875775);">of unintended tail duplication, which can easily overﬂow the code</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 34.39%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.860963);">cache. Alternatively, the VM could simply stop tracing, and give up</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 35.65%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.850884);">on ever tracing outer loops.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 36.91%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.90585);">We solve the nested loop problem by recording</span><span role="presentation" dir="ltr" style="left: 39.98%; top: 36.91%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 40.57%; top: 36.91%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.857501);">nested trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 38.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.816927);">trees</span><span role="presentation" dir="ltr" style="left: 11.62%; top: 38.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.83149);">. Our system traces the inner loop exactly as the na¨</span><span role="presentation" dir="ltr" style="left: 41.13%; top: 38.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.888279);">ıve version.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 39.42%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845918);">The system stops extending the inner tree when it reaches an outer</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 40.68%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.860185);">loop, but then it starts a new trace at the outer loop header. When</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 41.94%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.833547);">the outer loop reaches the inner loop header, the system tries to call</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 43.2%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.830485);">the trace tree for the inner loop. If the call succeeds, the VM records</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 44.46%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.910201);">the call to the inner tree as part of the outer trace and ﬁnishes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 45.71%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.897069);">the outer trace as normal. In this way, our system can trace any</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 46.97%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.848178);">number of loops nested to any depth without causing excessive tail</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 48.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.888261);">duplication.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 49.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.894047);">These techniques allow a VM to dynamically translate a pro-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 50.75%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.872652);">gram to nested, type-specialized trace trees. Because traces can</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 52%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855057);">cross function call boundaries, our techniques also achieve the ef-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 53.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.843218);">fects of inlining. Because traces have no internal control-ﬂow joins,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 54.52%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.924043);">they can be optimized in linear time by a simple compiler (10).</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 55.78%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.906273);">Thus, our tracing VM efﬁciently performs the same kind of op-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 57.04%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.884986);">timizations that would require interprocedural analysis in a static</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 58.29%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855715);">optimization setting. This makes tracing an attractive and effective</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 59.55%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855253);">tool to type specialize even complex function call-rich code.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 60.81%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.845596);">We implemented these techniques for an existing JavaScript in-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 62.07%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.887925);">terpreter, SpiderMonkey. We call the resulting tracing VM</span><span role="presentation" dir="ltr" style="left: 43.63%; top: 62.07%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 44.09%; top: 62.07%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.798989);">Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 63.32%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.866609);">Monkey</span><span role="presentation" dir="ltr" style="left: 13.4%; top: 63.32%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.857993);">. TraceMonkey supports all the JavaScript features of Spi-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 64.58%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.849234);">derMonkey, with a 2x-20x speedup for traceable programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 65.84%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.867445);">This paper makes the following contributions:</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 9.68%; top: 68.17%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 10.37%; top: 68.17%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 10.94%; top: 68.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.865012);">We explain an algorithm for dynamically forming trace trees to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.94%; top: 69.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.818059);">cover a program, representing nested loops as nested trace trees.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 9.68%; top: 71.19%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 10.37%; top: 71.19%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 10.94%; top: 71.25%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.839767);">We explain how to speculatively generate efﬁcient type-specialized</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.94%; top: 72.51%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.850986);">code for traces from dynamic language programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 9.68%; top: 74.21%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;">•</span><span role="presentation" dir="ltr" style="left: 10.37%; top: 74.21%; font-size: calc(var(--scale-factor)*7.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 10.94%; top: 74.27%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.859209);">We validate our tracing techniques in an implementation based</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.94%; top: 75.53%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.870774);">on the SpiderMonkey JavaScript interpreter, achieving 2x-20x</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.94%; top: 76.78%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.848926);">speedups on many programs.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 10.78%; top: 79.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.842168);">The remainder of this paper is organized as follows. Section 3 is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 80.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855331);">a general overview of trace tree based compilation we use to cap-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 81.69%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.893374);">ture and compile frequently executed code regions. In Section 4</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 82.95%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.872509);">we describe our approach of covering nested loops using a num-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 84.21%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.886456);">ber of individual trace trees. In Section 5 we describe our trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 85.46%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853197);">compilation based speculative type specialization approach we use</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 86.72%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.849285);">to generate efﬁcient machine code from recorded bytecode traces.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 87.98%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.894422);">Our implementation of a dynamic type-specializing compiler for</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 89.24%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.871825);">JavaScript is described in Section 6. Related work is discussed in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 8.82%; top: 90.5%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.851943);">Section 8. In Section 7 we evaluate our dynamic compiler based on</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 8.97%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">1 for (var i = 2; i &lt; 100; ++i) {</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 10.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;">2</span><span role="presentation" dir="ltr" style="left: 52.57%; top: 10.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 54.88%; top: 10.23%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">if (!primes[i])</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 11.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;">3</span><span role="presentation" dir="ltr" style="left: 52.57%; top: 11.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 56.41%; top: 11.49%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">continue;</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 12.75%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;">4</span><span role="presentation" dir="ltr" style="left: 52.57%; top: 12.75%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 54.88%; top: 12.75%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">for (var k = i + i; i &lt; 100; k += i)</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 14%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;">5</span><span role="presentation" dir="ltr" style="left: 52.57%; top: 14%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 56.41%; top: 14%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">primes[k] = false;</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 15.26%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">6 }</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 18.11%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.96544);">Figure 1. Sample program: sieve of Eratosthenes.</span><span role="presentation" dir="ltr" style="left: 84.08%; top: 18.11%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 84.68%; top: 18.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">primes</span><span role="presentation" dir="ltr" style="left: 89.29%; top: 18.06%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 89.89%; top: 18.11%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.87672);">is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 19.36%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.914481);">initialized to an array of 100</span><span role="presentation" dir="ltr" style="left: 69.2%; top: 19.36%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 69.71%; top: 19.32%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace; transform: scaleX(0.875097);">false</span><span role="presentation" dir="ltr" style="left: 73.56%; top: 19.32%; font-size: calc(var(--scale-factor)*8.97px); font-family: monospace;"> </span><span role="presentation" dir="ltr" style="left: 74.08%; top: 19.36%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.887113);">values on entry to this code</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 20.62%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.856483);">snippet.</span><span role="presentation" dir="ltr" style="left: 66.24%; top: 26.79%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03163);">Interpret</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 65.98%; top: 27.55%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.96039);">Bytecodes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 66.41%; top: 32.61%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.02155);">Monitor</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 55.17%; top: 34.68%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03931);">Record</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 54.79%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03674);">LIR</span><span role="presentation" dir="ltr" style="left: 56.1%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 56.32%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 56.81%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.960106);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 77.35%; top: 39.68%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03156);">Execute</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 76.01%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.962703);">Compiled</span><span role="presentation" dir="ltr" style="left: 79.58%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 79.8%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 80.29%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.960106);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 77.89%; top: 34.68%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03449);">Enter</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 76.01%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.962703);">Compiled</span><span role="presentation" dir="ltr" style="left: 79.58%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 79.8%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 80.29%; top: 35.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.960106);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 54.96%; top: 39.68%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03798);">Compile</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 54.79%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03674);">LIR</span><span role="presentation" dir="ltr" style="left: 56.1%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 56.32%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 56.81%; top: 40.44%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.960106);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 77.77%; top: 44.69%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.03514);">Leave</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 76.01%; top: 45.45%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.962703);">Compiled</span><span role="presentation" dir="ltr" style="left: 79.58%; top: 45.45%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 79.8%; top: 45.45%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">T</span><span role="presentation" dir="ltr" style="left: 80.29%; top: 45.45%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.960106);">race</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 65.75%; top: 29.29%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.948404);">loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 65.61%; top: 30.05%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.97254);">edge</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 62.72%; top: 34.3%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.928607);">hot</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 61.74%; top: 35.06%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.893554);">loop/exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 54.78%; top: 32.34%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.929908);">abort</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.98%; top: 33.1%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.94521);">recording</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 57.77%; top: 36.74%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif;">ﬁ</span><span role="presentation" dir="ltr" style="left: 58.19%; top: 36.74%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.943409);">nish at</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 57%; top: 37.5%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.959919);">loop header</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 72.13%; top: 29.94%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.916051);">cold/blacklisted</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 73.42%; top: 30.71%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.893554);">loop/exit</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 72.6%; top: 32.61%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.93968);">compiled trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 74.29%; top: 33.37%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.976659);">ready</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 69.46%; top: 37.37%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.938931);">loop edge with</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 70.02%; top: 38.13%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.964075);">same types</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 84.73%; top: 43.33%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.922151);">side exit to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 84.26%; top: 44.09%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.935163);">existing trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 69.84%; top: 43.05%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.945461);">side exit,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 68.43%; top: 43.81%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.936186);">no existing trace</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 82.85%; top: 27.33%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.992406);">Overhead</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 82.57%; top: 28.96%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.947631);">Interpreting</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 83.51%; top: 30.54%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(0.968645);">Native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 82.5%; top: 25.92%; font-size: calc(var(--scale-factor)*5.17px); font-family: sans-serif; transform: scaleX(1.04768);">Symbol Key</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 49.48%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.945639);">Figure 2.</span><span role="presentation" dir="ltr" style="left: 57.48%; top: 49.48%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 58.21%; top: 49.48%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.860384);">State machine describing the major activities of Trace-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 50.73%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.874971);">Monkey and the conditions that cause transitions to a new activ-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 51.99%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.917086);">ity. In the dark box, TM executes JS as compiled traces. In the</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 53.25%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.852979);">light gray boxes, TM executes JS in the standard interpreter. White</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 54.51%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.88393);">boxes are overhead. Thus, to maximize performance, we need to</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 55.77%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.855742);">maximize time spent in the darkest box and minimize time spent in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 57.02%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.835087);">the white boxes. The best case is a loop where the types at the loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 58.28%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.832325);">edge are the same as the types on entry–then TM can stay in native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 59.54%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.854978);">code until the loop is done.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 63.14%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.87191);">a set of industry benchmarks. The paper ends with conclusions in</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 64.4%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.848286);">Section 9 and an outlook on future work is presented in Section 10.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 67.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.868638);">2.</span><span role="presentation" dir="ltr" style="left: 53.14%; top: 67.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 54.93%; top: 67.16%; font-size: calc(var(--scale-factor)*10.96px); font-family: sans-serif; transform: scaleX(0.95937);">Overview: Example Tracing Run</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 69.11%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.919805);">This section provides an overview of our system by describing</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 70.37%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.908898);">how TraceMonkey executes an example program. The example</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 71.63%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.863331);">program, shown in Figure 1, computes the ﬁrst 100 prime numbers</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 72.88%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.841435);">with nested loops. The narrative should be read along with Figure 2,</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 74.14%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.872623);">which describes the activities TraceMonkey performs and when it</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 75.4%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.848952);">transitions between the loops.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 76.66%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.876573);">TraceMonkey always begins executing a program in the byte-</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 77.92%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.885367);">code interpreter. Every loop back edge is a potential trace point.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 79.17%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.889263);">When the interpreter crosses a loop edge, TraceMonkey invokes</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 80.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.83379);">the</span><span role="presentation" dir="ltr" style="left: 53.59%; top: 80.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 54.01%; top: 80.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.875958);">trace monitor</span><span role="presentation" dir="ltr" style="left: 62.06%; top: 80.43%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.863162);">, which may decide to record or execute a native</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 81.69%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.838131);">trace. At the start of execution, there are no compiled traces yet, so</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 82.95%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.822597);">the trace monitor counts the number of times each loop back edge is</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 84.21%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.838941);">executed until a loop becomes</span><span role="presentation" dir="ltr" style="left: 69.32%; top: 84.21%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif;"> </span><span role="presentation" dir="ltr" style="left: 69.64%; top: 84.21%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.853942);">hot</span><span role="presentation" dir="ltr" style="left: 71.52%; top: 84.21%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.843127);">, currently after 2 crossings. Note</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 85.46%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.827599);">that the way our loops are compiled, the loop edge is crossed before</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 86.72%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.854837);">entering the loop, so the second crossing occurs immediately after</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 87.98%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.849894);">the ﬁrst iteration.</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 53.75%; top: 89.24%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.928);">Here is the sequence of events broken down by outer loop</span><br role="presentation"><span role="presentation" dir="ltr" style="left: 51.8%; top: 90.5%; font-size: calc(var(--scale-factor)*8.97px); font-family: sans-serif; transform: scaleX(0.878831);">iteration:</span><div class="endOfContent"></div></div><div class="annotationLayer" hidden=""></div><div class="annotationEditorLayer" tabindex="0" hidden="" data-main-rotation="0" style="pointer-events: none; width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="canvasWrapper"><canvas role="presentation" width="779" height="1009" style="width: 779px; height: 1009px;"></canvas></div></div><div class="page" data-page-number="3" role="region" aria-label="第 3 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="4" role="region" aria-label="第 4 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="5" role="region" aria-label="第 5 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="6" role="region" aria-label="第 6 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="7" role="region" aria-label="第 7 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="8" role="region" aria-label="第 8 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="9" role="region" aria-label="第 9 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="10" role="region" aria-label="第 10 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="11" role="region" aria-label="第 11 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="12" role="region" aria-label="第 12 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="13" role="region" aria-label="第 13 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div><div class="page" data-page-number="14" role="region" aria-label="第 14 页" style="width: calc(var(--scale-factor) * 612px); height: calc(var(--scale-factor) * 792px);"></div></div>
        </div>
      </div> <!-- mainContainer -->

      <div id="dialogContainer">
        <dialog id="passwordDialog">
          <div class="row">
            <label for="password" id="passwordText" data-l10n-id="password_label">输入密码以打开此 PDF 文件。</label>
          </div>
          <div class="row">
            <input type="password" id="password" class="toolbarField">
          </div>
          <div class="buttonRow">
            <button id="passwordCancel" class="dialogButton"><span data-l10n-id="password_cancel">取消</span></button>
            <button id="passwordSubmit" class="dialogButton"><span data-l10n-id="password_ok">确定</span></button>
          </div>
        </dialog>
        <dialog id="documentPropertiesDialog">
          <div class="row">
            <span id="fileNameLabel" data-l10n-id="document_properties_file_name">文件名:</span>
            <p id="fileNameField" aria-labelledby="fileNameLabel">-</p>
          </div>
          <div class="row">
            <span id="fileSizeLabel" data-l10n-id="document_properties_file_size">文件大小:</span>
            <p id="fileSizeField" aria-labelledby="fileSizeLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="titleLabel" data-l10n-id="document_properties_title">标题:</span>
            <p id="titleField" aria-labelledby="titleLabel">-</p>
          </div>
          <div class="row">
            <span id="authorLabel" data-l10n-id="document_properties_author">作者:</span>
            <p id="authorField" aria-labelledby="authorLabel">-</p>
          </div>
          <div class="row">
            <span id="subjectLabel" data-l10n-id="document_properties_subject">主题:</span>
            <p id="subjectField" aria-labelledby="subjectLabel">-</p>
          </div>
          <div class="row">
            <span id="keywordsLabel" data-l10n-id="document_properties_keywords">关键词:</span>
            <p id="keywordsField" aria-labelledby="keywordsLabel">-</p>
          </div>
          <div class="row">
            <span id="creationDateLabel" data-l10n-id="document_properties_creation_date">创建日期:</span>
            <p id="creationDateField" aria-labelledby="creationDateLabel">-</p>
          </div>
          <div class="row">
            <span id="modificationDateLabel" data-l10n-id="document_properties_modification_date">修改日期:</span>
            <p id="modificationDateField" aria-labelledby="modificationDateLabel">-</p>
          </div>
          <div class="row">
            <span id="creatorLabel" data-l10n-id="document_properties_creator">创建者:</span>
            <p id="creatorField" aria-labelledby="creatorLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="producerLabel" data-l10n-id="document_properties_producer">PDF 生成器：</span>
            <p id="producerField" aria-labelledby="producerLabel">-</p>
          </div>
          <div class="row">
            <span id="versionLabel" data-l10n-id="document_properties_version">PDF 版本:</span>
            <p id="versionField" aria-labelledby="versionLabel">-</p>
          </div>
          <div class="row">
            <span id="pageCountLabel" data-l10n-id="document_properties_page_count">页数:</span>
            <p id="pageCountField" aria-labelledby="pageCountLabel">-</p>
          </div>
          <div class="row">
            <span id="pageSizeLabel" data-l10n-id="document_properties_page_size">页面大小：</span>
            <p id="pageSizeField" aria-labelledby="pageSizeLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="linearizedLabel" data-l10n-id="document_properties_linearized">快速 Web 视图：</span>
            <p id="linearizedField" aria-labelledby="linearizedLabel">-</p>
          </div>
          <div class="buttonRow">
            <button id="documentPropertiesClose" class="dialogButton"><span data-l10n-id="document_properties_close">关闭</span></button>
          </div>
        </dialog>
        <dialog id="printServiceDialog" style="min-width: 200px;">
          <div class="row">
            <span data-l10n-id="print_progress_message">正在准备打印文档…</span>
          </div>
          <div class="row">
            <progress value="0" max="100"></progress>
            <span data-l10n-id="print_progress_percent" data-l10n-args="{ &quot;progress&quot;: 0 }" class="relative-progress">0%</span>
          </div>
          <div class="buttonRow">
            <button id="printCancel" class="dialogButton"><span data-l10n-id="print_progress_close">取消</span></button>
          </div>
        </dialog>
      </div>  <!-- dialogContainer -->

    </div> <!-- outerContainer -->
    <div id="printContainer"></div>

    <input type="file" id="fileInput" class="hidden">
</body></html>